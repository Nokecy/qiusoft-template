// PDM 统一搜索页面样式 - 企业级紧凑风格
// ============================================

// 变量定义
@primary-color: #1677ff;
@primary-hover: #4096ff;
@text-primary: #262626;
@text-secondary: #595959;
@text-tertiary: #8c8c8c;
@border-color: #d9d9d9;
@border-light: #f0f0f0;
@bg-container: #ffffff;
@bg-layout: #f5f5f5;
@bg-hover: #fafafa;
@highlight-bg: #fff7e6;
@highlight-color: #d46b08;
@shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.03);
@shadow-base: 0 2px 8px rgba(0, 0, 0, 0.08);
@transition-fast: all 0.2s ease;
@border-radius: 4px;

// ============================================
// 页面容器
// ============================================
.document-search-page {
  min-height: calc(100vh - 120px);
  background: @bg-layout;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

// ============================================
// 搜索头部
// ============================================
.search-header {
  background: @bg-container;
  border-radius: @border-radius;
  padding: 16px;
  box-shadow: @shadow-sm;
}

// 搜索栏
.search-bar {
  display: flex;
  align-items: center;
  justify-content: center;
}

.search-input-group {
  display: flex;
  align-items: stretch;
  width: 100%;
  max-width: 700px;

  .search-type-select {
    flex-shrink: 0;

    :global(.ant-select-selector) {
      border-radius: @border-radius 0 0 @border-radius !important;
      border-right: none !important;
      height: 36px !important;
    }

    :global(.ant-select-selection-item) {
      line-height: 34px !important;
    }
  }

  .search-input {
    flex: 1;

    :global(.ant-input-affix-wrapper) {
      border-radius: 0;
      height: 36px;
      border-right: none;
    }

    :global(.ant-input) {
      height: 100%;
    }
  }

  .search-btn {
    height: 36px;
    font-size: 13px;
    border-radius: 0 @border-radius @border-radius 0;
    padding: 0 20px;
  }
}

.type-option {
  display: inline-flex;
  align-items: center;
  gap: 6px;

  :global(.anticon) {
    font-size: 14px;
  }
}

// 高级搜索切换按钮
.advanced-toggle-btn {
  margin-left: 8px;
  font-size: 12px;
  padding: 0 8px;
  
  :global(.anticon) {
    margin-right: 4px;
  }
}

// 高级搜索区域
.advanced-search {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid @border-light;
}

// ============================================
// 搜索历史
// ============================================
.search-history {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid @border-light;
}

.history-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.history-label {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: @text-tertiary;
}

.clear-btn {
  font-size: 12px;
  padding: 0;
  height: auto;
}

.history-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.history-tag {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  cursor: pointer;
  font-size: 12px;
  padding: 2px 8px;
  border-radius: @border-radius;
  transition: @transition-fast;

  &:hover {
    border-color: @primary-color;
    color: @primary-color;
  }
}

// ============================================
// 搜索结果区域
// ============================================
.search-results {
  background: @bg-container;
  border-radius: @border-radius;
  box-shadow: @shadow-sm;
  flex: 1;
  display: flex;
  flex-direction: column;
}

// 工具栏
.results-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  border-bottom: 1px solid @border-light;
  flex-shrink: 0;
}

.toolbar-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.toolbar-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.results-stats {
  font-size: 13px;
  color: @text-secondary;

  strong {
    color: @primary-color;
    font-weight: 600;
  }

  .duration {
    color: @text-tertiary;
    margin-left: 4px;
  }
}

.status-filter {
  :global(.ant-segmented-item) {
    padding: 2px 10px;
    font-size: 12px;
  }
}

.view-switch {
  :global(.ant-segmented-item) {
    padding: 4px 8px;
  }
}

// ============================================
// 列表视图
// ============================================
.results-list-view {
  flex: 1;
  overflow: auto;
}

.list-header {
  display: grid;
  grid-template-columns: 32px 140px 1fr 60px 120px 72px 90px 80px 48px;
  gap: 8px;
  padding: 8px 16px;
  background: @bg-layout;
  border-bottom: 1px solid @border-light;
  font-size: 12px;
  font-weight: 500;
  color: @text-tertiary;
  position: sticky;
  top: 0;
  z-index: 1;

  > div {
    display: flex;
    align-items: center;
  }
}

.list-body {
  // 列表主体
}

.result-list-item {
  display: grid;
  grid-template-columns: 32px 140px 1fr 60px 120px 72px 90px 80px 48px;
  gap: 8px;
  padding: 10px 16px;
  border-bottom: 1px solid @border-light;
  cursor: pointer;
  transition: @transition-fast;
  align-items: center;

  &:hover,
  &.hovered {
    background: @bg-hover;
  }

  &:last-child {
    border-bottom: none;
  }
}

.item-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  color: @primary-color;
}

.item-code {
  font-size: 13px;
  font-weight: 500;
  color: @text-primary;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.item-title {
  font-size: 13px;
  color: @text-primary;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.item-version {
  font-size: 12px;
  text-align: center;
}

.item-category {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  .item-category-icon {
    font-size: 12px;
    color: @text-tertiary;
    flex-shrink: 0;
  }
}

.item-status {
  .status-tag {
    font-size: 12px;
    padding: 0 6px;
    line-height: 18px;
    border-radius: 2px;
  }
}

.item-time {
  font-size: 12px;
}

.item-creator {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  .item-creator-icon {
    font-size: 12px;
    color: @text-tertiary;
    flex-shrink: 0;
  }
}

.item-actions {
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: @transition-fast;

  .result-list-item:hover &,
  .result-list-item.hovered & {
    opacity: 1;
  }

  :global(.ant-btn) {
    color: @text-tertiary;

    &:hover {
      color: @primary-color;
    }
  }
}

// ============================================
// 卡片视图
// ============================================
.results-card-view {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 12px;
  padding: 16px;
  flex: 1;
  overflow: auto;
  align-content: start;
}

.result-card-item {
  background: @bg-container;
  border: 1px solid @border-light;
  border-radius: @border-radius;
  padding: 12px;
  cursor: pointer;
  transition: @transition-fast;

  &:hover,
  &.hovered {
    border-color: @primary-color;
    box-shadow: @shadow-base;
  }
}

.card-header {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  margin-bottom: 8px;
}

.card-icon {
  font-size: 20px;
  color: @primary-color;
  flex-shrink: 0;
  margin-top: 2px;
}

.card-title-area {
  flex: 1;
  min-width: 0;
}

.card-code {
  font-size: 12px;
  color: @text-tertiary;
  margin-bottom: 2px;
}

.card-title {
  font-size: 14px;
  font-weight: 500;
  color: @text-primary;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.card-status {
  flex-shrink: 0;
  font-size: 12px;
  padding: 0 6px;
  line-height: 18px;
  border-radius: 2px;
}

.card-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-bottom: 8px;
  font-size: 12px;
  color: @text-secondary;

  .meta-item {
    display: inline-flex;
    align-items: center;
    gap: 4px;

    :global(.anticon) {
      font-size: 12px;
      color: @text-tertiary;
    }
  }
}

.card-summary {
  font-size: 12px;
  color: @text-tertiary;
  line-height: 1.5;
  margin-bottom: 8px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.card-footer {
  display: flex;
  align-items: center;
  gap: 12px;
  padding-top: 8px;
  border-top: 1px solid @border-light;
  font-size: 12px;
  color: @text-tertiary;

  .footer-item {
    display: inline-flex;
    align-items: center;
    gap: 4px;

    :global(.anticon) {
      font-size: 12px;
    }
  }
}

// 卡片预览悬浮层
.card-preview-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: @transition-fast;
  border-radius: @border-radius;
  pointer-events: none;
}

.result-card-item {
  position: relative;

  &:hover .card-preview-overlay {
    opacity: 1;
    pointer-events: auto;
  }
}

// ============================================
// 关键词高亮
// ============================================
.search-highlight {
  background: @highlight-bg;
  color: @highlight-color;
  padding: 0 2px;
  border-radius: 2px;
  font-weight: 500;
}

// ============================================
// 空状态
// ============================================
.empty-state {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
}

// ============================================
// 搜索引导
// ============================================
.search-guide {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: @bg-container;
  border-radius: @border-radius;
  box-shadow: @shadow-sm;
}

.guide-content {
  text-align: center;
  max-width: 400px;
}

.guide-icon {
  font-size: 48px;
  color: @border-color;
  margin-bottom: 16px;
}

.guide-title {
  font-size: 18px;
  font-weight: 500;
  color: @text-primary;
  margin-bottom: 8px;
}

.guide-desc {
  font-size: 14px;
  color: @text-secondary;
  margin-bottom: 24px;
}

.guide-tips {
  display: flex;
  flex-direction: column;
  gap: 12px;
  text-align: left;

  .tip-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 16px;
    background: @bg-layout;
    border-radius: @border-radius;
    font-size: 13px;
    color: @text-secondary;

    :global(.anticon) {
      font-size: 16px;
      color: @primary-color;
    }
  }
}

// ============================================
// 分页器
// ============================================
.results-pagination {
  display: flex;
  justify-content: center;
  padding: 12px 16px;
  border-top: 1px solid @border-light;
  flex-shrink: 0;
}

// ============================================
// 响应式适配
// ============================================
@media screen and (max-width: 1200px) {
  .list-header,
  .result-list-item {
    grid-template-columns: 32px 120px 1fr 50px 100px 68px 80px 70px 40px;
  }
}

@media screen and (max-width: 992px) {
  .list-header,
  .result-list-item {
    grid-template-columns: 32px 110px 1fr 68px 80px 40px;
  }

  .header-version,
  .header-category,
  .header-creator,
  .item-version,
  .item-category,
  .item-creator {
    display: none;
  }
}

@media screen and (max-width: 768px) {
  .document-search-page {
    padding: 8px;
  }

  .search-header {
    padding: 12px;
  }

  .search-input-group {
    flex-direction: column;
    gap: 8px;

    .search-type-select {
      width: 100%;

      :global(.ant-select-selector) {
        border-radius: @border-radius !important;
        border-right: 1px solid @border-color !important;
      }
    }

    .search-input {
      :global(.ant-input-affix-wrapper) {
        border-radius: @border-radius;
        border-right: 1px solid @border-color;
      }
    }

    .search-btn {
      width: 100%;
      border-radius: @border-radius;
    }
  }

  .results-toolbar {
    flex-direction: column;
    gap: 10px;
    align-items: flex-start;
  }

  .toolbar-left,
  .toolbar-right {
    width: 100%;
    justify-content: space-between;
  }

  .list-header,
  .result-list-item {
    grid-template-columns: 32px 1fr 68px 40px;
  }

  .header-code,
  .header-time,
  .item-code,
  .item-time {
    display: none;
  }

  .results-card-view {
    grid-template-columns: 1fr;
    padding: 12px;
  }
}

// ============================================
// 滚动条美化
// ============================================
.results-list-view,
.results-card-view {
  &::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    background: @border-color;
    border-radius: 3px;

    &:hover {
      background: @text-tertiary;
    }
  }
}

// ============================================
// 加载状态优化
// ============================================
:global(.ant-spin-nested-loading) {
  flex: 1;
  display: flex;
  flex-direction: column;

  :global(.ant-spin-container) {
    flex: 1;
    display: flex;
    flex-direction: column;
  }
}
