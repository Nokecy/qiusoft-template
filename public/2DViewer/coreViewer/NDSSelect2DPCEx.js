((e,t)=>{"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.NDSSelect2DPCEx=t():e.NDSSelect2DPCEx=t()})(window,function(){return r=[function(e,t,r){r.r(t),r.d(t,"NSDSelect2DPCExtension",function(){return l});class i extends NDSWebViewer.OpBase{constructor(e){super(e)}setFrameListener(e){this.__frameListener__&&this.viewer.removeFrameListener(this.__frameListener__),(this.__frameListener__=e)&&this.viewer.addFrameListener(e)}render(e=!1,t=!0){super.render(e,t)}init(){super.init()}release(){super.release()}update(){super.update()}selectByClick(e,t,r){super.selectByClick(e,t,r)}mouseEvent(e){super.mouseEvent(e)}onTouchSingleStart(e){super.onTouchSingleStart(e)}onTouchSingleMove(e){super.onTouchSingleMove(e)}onTouchSingleEnd(e){super.onTouchSingleEnd(e)}onTouchDoubleStart(e){super.onTouchDoubleStart(e)}onTouchDoubleMove(e){super.onTouchDoubleMove(e)}onTouchDoubleEnd(e){super.onTouchDoubleEnd(e)}onLMouseDbClick(e){super.onLMouseDbClick(e)}onLMouseClick(e){super.onLMouseClick(e)}onMMouseClick(e){super.onMMouseClick(e)}onRMouseClick(e){super.onRMouseClick(e)}onLMouseDown(e){super.onLMouseDown(e)}onMMouseDown(e){super.onMMouseDown(e)}onRMouseDown(e){super.onRMouseDown(e)}onLMouseMove(e){super.onLMouseMove(e)}onMMouseMove(e){super.onMMouseMove(e)}onRMouseMove(e){super.onRMouseMove(e)}onNMouseMove(e){super.onNMouseMove(e)}onLMouseUp(e){super.onLMouseUp(e)}onMMouseUp(e){super.onMMouseUp(e)}onRMouseUp(e){super.onRMouseUp(e)}onMousewheel(e){super.onMousewheel(e)}}class n{constructor(e){this.viewer=e.viewer,this.OpSelectObj=e,this.curSelectObj=null,this.selectMeshMaterial=NDSWebViewer.SETTING.selectedFace2DMaterial,this.selectColor=NDSWebViewer.SETTING.selectedColor.getHex()}onLMouseClick(e,t,r,i){this.curSelectObj&&(this.clearSelectObjects(this.curSelectObj),this.curSelectObj=null),this.viewer.ndsModel.activeModel.modelObjectsData?((e=this.doRayCasterPick(this.viewer.ndsModel.activeModel.modelObjectsData,e,t))&&(this.curSelectObj=e),this.OpSelectObj.viewer.dispatchEvent({type:"isSelectObjects",data:""})):i&&i()}setSelectObjBase(){this.curSelectObj&&this.drawSelectObjects(this.curSelectObj)}setSelectObjPortion(){var e;this.curSelectObj&&(7===(e=this.curSelectObj).type?this.selectPrims({mesh:[],line:[],text:e.prims.text,point:[]}):6!==e.type&&3!==e.type&&4!==e.type||this.selectPrims(e.prims))}clearSelectObjBase(){this.curSelectObj&&(this.clearSelectObjects(this.curSelectObj),this.curSelectObj=null)}getViewClientCoords(e){var t=e.offsetX||e.clientX-this.viewer.container.getBoundingClientRect().left,r=e.offsetY||e.clientY-this.viewer.container.getBoundingClientRect().top;return e.srcElement&&e.srcElement!==this.viewer.renderer.domElement&&(t=e.clientX-this.viewer.container.getBoundingClientRect().left,r=e.clientY-this.viewer.container.getBoundingClientRect().top),null==e.srcElement&&e.target&&e.target!==this.viewer.renderer.domElement&&(t=e.clientX-this.viewer.container.getBoundingClientRect().left,r=e.clientY-this.viewer.container.getBoundingClientRect().top),new THREE.Vector2(t,r)}getLinePrecision(){var e=this.viewer.clientCoordToModelCoord([0,0]),e=new THREE.Vector3(e[0],e[1],e[2]),t=this.viewer.clientCoordToModelCoord([4,0]),t=new THREE.Vector3(t[0],t[1],t[2]);return e.distanceTo(t)}getTypeCount(e){let t=0;return 0<e.mesh.length&&t++,0<e.line.length&&t++,0<e.text.length&&t++,0<e.point.length&&t++,t}doRayCasterPick(t,e,r){var i=this.viewer,n=i.renderer.domElement,o=i.renderer.getPixelRatio(),e=e*o/n.width*2-1,r=2*-(r*o/n.height)+1,s=new THREE.Raycaster;i.camera.setCastRay(s,e,r),s.linePrecision=this.getLinePrecision();let a=null,l=null,c=-1;var d=[];if(t.children)for(let e=0;e<t.children.length;e++){var u=t.children[e];if(3===u.type){if(d.push(u),u.children)for(let e=0;e<u.children.length;e++){var h=u.children[e];if(this.intersectBlocksNew(h,s.ray,s.linePrecision)){c=6,a=h,l=this.getIntersectsPrims(c,a);break}}if(a)break}else if(this.intersectBlocksNew(u,s.ray,s.linePrecision)){c=6,a=u,l=this.getIntersectsPrims(c,a);break}}if(!a&&t.prims&&(o=this.intersectBlockObjectsNew(t,s.ray,s.linePrecision))&&(c=o.type,a=o.object,l=this.getIntersectsPrims(c,o.object),1<this.getTypeCount(l))&&(c=7),!a&&0<d.length)for(let e=0;e<d.length;e++){var p=this.intersectBlockObjectsNew(d[e],s.ray,s.linePrecision);if(p){c=p.type,a=p.object,l=this.getIntersectsPrims(c,p.object),1<this.getTypeCount(l)&&(c=7);break}}n={type:c,intersect:a,prims:l};return a?n:null}intersectBox(e,t,r){return!t.isEmpty()&&(Math.abs(t.min.x-t.max.x)<r&&(t.min.x-=r/2,t.max.x+=r/2),Math.abs(t.min.y-t.max.y)<r&&(t.min.y-=r/2,t.max.y+=r/2),e.intersectsBox(t))}intersectBlocksNew(t,r,i){var e,n,o,s,a=t.bbox;if(this.intersectBox(r,a,i)){if(t.prims){for(e of t.prims[0])if(this.instersectMeshs(e[0],r,-1,-1,i,i))return!0;for(n of t.prims[1])if(this.instersectLineSegments(n[0],r,-1,-1,i,i))return!0;for(o of t.prims[2])if(this.instersectPoints(o[0],r,-1,-1,i,i))return!0;for(s of t.prims[3])if(this.instersectTexts(s[0],r,-1,-1,i,i))return!0}if(t.children)for(let e=0;e<t.children.length;e++)if(this.intersectBlocksNew(t.children[e],r,i))return!0}return!1}intersectBlockObjectsNew(d,e,t){var r,i,n,o,s=d.bbox;if(this.intersectBox(e,s,t)&&d.prims){function a(t,e,r){if(3===r)for(var i of e)return t.object=d.objects[i],t;for(var n of e){var o=d.objects[n],s=t.index;for(let e=0;e<o.length;e+=4){var a=o[e],l=o[e+2],c=o[e+3];if(3!==r&&r===a&&l<=s&&s<=c)return t.object=o,t}}console.log("Not Export object")}for(r of d.prims[0]){var l=this.instersectMeshs(r[0],e,-1,-1,t,t);if(l)return a(l,r[1],0)}for(i of d.prims[1]){var c=this.instersectLineSegments(i[0],e,-1,-1,t,t);if(c)return a(c,i[1],1)}for(n of d.prims[2]){var u=this.instersectPoints(n[0],e,-1,-1,t,t);if(u)return a(u,n[1],2)}for(o of d.prims[3]){var h=this.instersectTexts(o[0],e,-1,-1,t,t);if(h)return a(h,o[1],3)}}return null}instersectMeshs(e,t,r,i,n,o){var s=this.viewer.ndsModel.activeModel.meshManager;if(s.geomId[e]<0)return null;var a=s.geomManager.getGeomFromId(s.geomId[e]);if(!a||!a.loaded||!a.index||a.index&&null==a.index.array)return null;var l=s.mats[s.materialId[e]],c=s.bodyNodes[e];if(c.isHidden())return null;for(var d=new THREE.Matrix4,u=0;u<16;++u)d.elements[u]=s.matrixes[16*s.matrixId[e]+u];var h=a.boundingBox.clone();if(h.applyMatrix4(d),!t.intersectsBox(h))return null;for(var p,f,m,h=new THREE.Matrix4,g=(h.getInverse(d),new THREE.Ray),E=(g.copy(t).applyMatrix4(h),{}),b=(E.distance=1/0,E.point=new THREE.Vector3,E.face=new THREE.Face3,E.faceIndex=-1,E.index=-1,E.meshId=-1,E.lineSegId=-1,E.textId=-1,E.type=l.map?4:0,a.index),S=a.attributes.position,w=new THREE.Vector3,x=new THREE.Vector3,M=new THREE.Vector3,v=new THREE.Vector3,R=new THREE.Face3,T=a.drawRange.start,y=a.drawRange.start+a.drawRange.count;T<y;T+=3){p=b.getX(T),f=b.getX(T+1),m=b.getX(T+2),w.fromBufferAttribute(S,p),x.fromBufferAttribute(S,f),M.fromBufferAttribute(S,m);var O=g.intersectTriangle(M,x,w,!1,v);if(null!==O){v.applyMatrix4(d),R.a=p,R.b=f,R.c=m,R.normal=THREE.Triangle.normal(w,x,M);O=t.origin.distanceTo(v);if(O<E.distance){E.distance=O,E.point.copy(v),E.face.copy(R),E.index=(T-a.drawRange.start)/3,E.faceIndex=T/3,E.meshId=e,E.lineSegId=-1,E.textId=-1,E.geomId=s.geomId[e],E.geomUuid=s.geomUuid[e],E.bodyNode=c,E.bodyUuid=c.uuid;break}}}return-1===E.meshId?null:E}instersectLineSegments(r,e,t,i,n,o){var s=this.viewer.ndsModel.activeModel.meshManager;if(s.lineSegGeomId[r]<0)return null;var a=s.geomManager.getGeomFromId(s.lineSegGeomId[r]);if(0===a.drawRange.count||!a.loaded||a.index&&null==a.index.array)return null;var l=s.lineSegBodyNodes[r];if(l.isHidden())return null;for(var c=new THREE.Matrix4,d=0;d<16;++d)c.elements[d]=s.matrixes[16*s.lineSegMatrixId[r]+d];var u=a.boundingBox.clone();if(u.applyMatrix4(c),!this.intersectBox(e,u,o))return null;var u=new THREE.Vector3,h=new THREE.Vector3,p=new THREE.Quaternion,u=(c.decompose(u,p,h),new THREE.Matrix4),f=(u.getInverse(c),new THREE.Ray),m=(f.copy(e).applyMatrix4(u),{}),p=(m.distance=n,m.point=new THREE.Vector3,m.face=null,m.faceIndex=-1,m.index=-1,m.meshId=-1,m.lineSegId=-1,m.textId=-1,m.type=a.isPoints?2:1,o/((h.x+h.y+h.z)/3)),g=p*p,E=a.index,b=a.attributes.position,S=new THREE.Vector3,w=new THREE.Vector3,e=new THREE.Plane(new THREE.Vector3(0,0,-1),0),x=new THREE.Vector3;f.intersectPlane(e,x);let M,v;var R=new THREE.Vector3,T=new THREE.Vector3;new THREE.Vector3;if(a.isPoints)for(var y=a.drawRange.start,O=a.drawRange.start+a.drawRange.count;y<O;y++){M=E.getX(y),R.fromBufferAttribute(b,M);var j=x.distanceToSquared(R);if(j<g)return m.distance=j,m.point.copy(R),m.point.applyMatrix4(c),m.index=y-a.drawRange.start,m.face=null,m.faceIndex=-1,m.meshId=-1,m.textId=-1,m.lineSegId=r,m.geomId=s.lineSegGeomId[r],m.geomUuid=s.lineSegGeomUuid[r],m.bodyNode=l,m.bodyUuid=l.uuid,m.isPointsGeom=!0,m}else for(let e=a.drawRange.start,t=a.drawRange.start+a.drawRange.count;e<t;e+=2){M=E.getX(e),v=E.getX(e+1),R.fromBufferAttribute(b,M),T.fromBufferAttribute(b,v);var H=new THREE.Line3(R.clone(),T.clone()),B=(R.z=0,T.z=0,S.subVectors(x,R),w.subVectors(T,R),w.dot(S)/w.dot(w));if(!(B<0||1<B||isNaN(B))){var I=x.distanceToSquared(w.clone().multiplyScalar(B).add(R));if(!(g<I))return I=H.at(B),m.distance=f.origin.distanceTo(I),m.point.copy(I),m.point.applyMatrix4(c),m.index=(e-a.drawRange.start)/2,m.face=null,m.faceIndex=-1,m.meshId=-1,m.textId=-1,m.lineSegId=r,m.geomId=s.lineSegGeomId[r],m.geomUuid=s.lineSegGeomUuid[r],m.bodyNode=l,m.bodyUuid=l.uuid,m}}return-1===m.lineSegId?null:m}instersectPoints(e,t,r,i,n,o){return this.instersectLineSegments(e,t,r,i,n,2*o)}instersectTexts(n,e,t,r,P,o){var s=this.viewer.ndsModel.activeModel.meshManager;if(s.textGeomId[n]<0)return null;var a=s.geomManager.getGeomFromId(s.textGeomId[n]);if(!a||!a.loaded||!a.index||a.index&&null==a.index.array)return null;var l=s.textBodyNodes[n];if(l.isHidden())return null;for(var c=new THREE.Matrix4,i=0;i<16;++i)c.elements[i]=s.matrixes[16*s.textMatrixId[n]+i];var d=a.boundingBox.clone();if(d.applyMatrix4(c),!this.intersectBox(e,d,o))return null;var d=new THREE.Matrix4,u=(d.getInverse(c),new THREE.Ray),h=(u.copy(e).applyMatrix4(d),{});h.distance=1/0,h.point=new THREE.Vector3,h.face=new THREE.Face3,h.faceIndex=-1,h.index=-1,h.meshId=-1,h.lineSegId=-1,h.textId=-1,h.type=3;let p=a.index,f=a.attributes.position,m,g,E;var b=new THREE.Vector3,S=new THREE.Vector3,w=new THREE.Vector3;if(a.isShx){var d=new THREE.Vector3,x=new THREE.Vector3,M=new THREE.Quaternion,d=(c.decompose(d,M,x),o/((x.x+x.y+x.z)/3)),v=d*d;let r=a.index,i=a.attributes.position;var R=new THREE.Vector3,T=new THREE.Vector3,M=new THREE.Plane(new THREE.Vector3(0,0,-1),0),y=new THREE.Vector3;u.intersectPlane(M,y),new THREE.Vector3;for(let e=a.drawRange.start,t=a.drawRange.start+a.drawRange.count;e<t;e+=2){m=r.getX(e),g=r.getX(e+1),b.fromBufferAttribute(i,m),S.fromBufferAttribute(i,g);var O=new THREE.Line3(b.clone(),S.clone()),j=(b.z=0,S.z=0,R.subVectors(y,b),T.subVectors(S,b),T.dot(R)/T.dot(T));if(!(j<0||1<j||isNaN(j))){var H=y.distanceToSquared(T.clone().multiplyScalar(j).add(b));if(!(v<H)){H=O.at(j),h.distance=u.origin.distanceTo(H),h.point.copy(H),h.point.applyMatrix4(c),h.index=(e-a.drawRange.start)/2,h.face=null,h.faceIndex=-1,h.meshId=-1,h.textId=n,h.lineSegId=-1,h.geomId=s.textGeomId[n],h.geomUuid=s.textGeomUuid[n],h.bodyNode=l,h.bodyUuid=l.uuid;break}}}}else for(var B=new THREE.Vector3,I=new THREE.Face3,D=a.drawRange.start,C=a.drawRange.start+a.drawRange.count;D<C;D+=3){m=p.getX(D),g=p.getX(D+1),E=p.getX(D+2),b.fromBufferAttribute(f,m),S.fromBufferAttribute(f,g),w.fromBufferAttribute(f,E);var N=u.intersectTriangle(w,S,b,!1,B);if(null!==N){B.applyMatrix4(c),I.a=m,I.b=g,I.c=E,I.normal=THREE.Triangle.normal(b,S,w);N=e.origin.distanceTo(B);if(N<h.distance){h.distance=N,h.point.copy(B),h.face.copy(I),h.faceIndex=D/3,h.index=(D-a.drawRange.start)/3,h.meshId=-1,h.lineSegId=-1,h.textId=n,h.geomId=s.textGeomId[n],h.geomUuid=s.textGeomUuid[n],h.bodyNode=l,h.bodyUuid=l.uuid;break}}}return-1===h.textId?null:h}getIntersectsPrims(e,t){var r={mesh:[],line:[],text:[],point:[]};return 6==e?this.getBlockPrims(t,r):3==e||4==e?this.getObjectPrims(t,r):this.getObjectPrims(t,r,!0),r}getBlockPrims(t,r){if(t.objects)for(let e=0;e<t.objects.length;e++)this.getObjectPrims(t.objects[e],r);if(t.children)for(let e=0;e<t.children.length;e++)this.getBlockPrims(t.children[e],r)}getObjectPrims(t,r,e){for(let e=0;e<t.length;e+=4){var i=t[e],n=t[e+1],o=t[e+2],s=t[e+3];0==i?r.mesh.push(n,o,s):1==i?r.line.push(n,o,s):2==i?r.point.push(n,o,s):3==i&&r.text.push(n,o,s)}}drawSelectObjects(e){var t,r,i;7===e.type?(this.selectPrims({mesh:[],line:[],text:e.prims.text,point:[]}),t=e.prims.point,r=e.prims.mesh,i=e.prims.line,e.obj=[],0<t.length&&e.obj.push(this.createSelectPointGeom(t)),0<r.length&&e.obj.push(this.createSelectMeshGeom(r)),0<i.length&&e.obj.push(this.createSelectLineGeom(i)),0<e.obj.length&&this.addSelectObj(e)):6===e.type||3===e.type||4===e.type?this.selectPrims(e.prims):2===e.type?0<(t=e.prims.point).length&&(e.obj=[],e.obj.push(this.createSelectPointGeom(t)),this.addSelectObj(e)):0===e.type?0<(r=e.prims.mesh).length&&(e.obj=[],e.obj.push(this.createSelectMeshGeom(r)),this.addSelectObj(e)):1===e.type&&0<(i=e.prims.line).length&&(e.obj=[],e.obj.push(this.createSelectLineGeom(i)),this.addSelectObj(e)),this.OpSelectObj.render()}addSelectObj(e){e.obj&&Array.isArray(e.obj)&&e.obj.forEach(e=>{this.OpSelectObj.rootObject.add(e)})}removeSelectObj(e){e.obj&&Array.isArray(e.obj)&&e.obj.forEach(e=>{this.OpSelectObj.rootObject.remove(e)})}selectPrims(t){var r=this.viewer.ndsModel.activeModel.meshState;for(let e=0;e<t.mesh.length;e+=3){var i=t.mesh[e];r.changeMeshMaterial(i,this.selectMeshMaterial.color.getHex())}for(let e=0;e<t.line.length;e+=3){var n=t.line[e];r.setLineMaterial(n,this.selectColor)}for(let e=0;e<t.text.length;e+=3){var o=t.text[e];r.setTextMaterial(o,this.selectColor)}for(let e=0;e<t.point.length;e+=3){var s=t.point[e];r.setPointMaterial(s,this.selectColor)}}createSelectPointGeom(t){var r=this.viewer.ndsModel.activeModel.meshManager,i=[];let n=null;for(let e=0;e<t.length;e+=3){var o,s=t[e],a=t[e+1],l=t[e+2],c=r.geomManager.getGeomFromId(r.lineSegGeomId[s]),d=(n=(new THREE.Matrix4).fromArray(r.matrixes,16*r.lineSegMatrixId[s]),c.index),u=c.attributes.position,s=c.drawRange.start+a,a=c.drawRange.start+l,h=new THREE.Vector3;for(let e=s,t=a;e<=t;e+=1)o=d.getX(e),h.fromBufferAttribute(u,o),i.push(h.x,h.y,h.z)}var e=new Float32Array(i),p=new THREE.BufferGeometry,e=(p.setAttribute("position",new THREE.BufferAttribute(e,3)),new THREE.Points(p,this.OpSelectObj.pointMaterial));return e.applyMatrix4(n.clone()),e.updateMatrixWorld(),e}createSelectMeshGeom(t){var r=this.viewer.ndsModel.activeModel.meshManager;let i=null;var n=[];for(let e=0;e<t.length;e+=3){var o,s,a,l=t[e],c=t[e+1],d=t[e+2],u=r.geomManager.getGeomFromId(r.geomId[l]),h=(i=(new THREE.Matrix4).fromArray(r.matrixes,16*r.matrixId[l]),u.index),p=u.attributes.position,l=u.drawRange.start+3*c,c=u.drawRange.start+3*d,f=new THREE.Vector3,m=new THREE.Vector3,g=new THREE.Vector3;for(let e=l,t=c;e<=t;e+=3)o=h.getX(e),s=h.getX(e+1),a=h.getX(e+2),f.fromBufferAttribute(p,o),m.fromBufferAttribute(p,s),g.fromBufferAttribute(p,a),n.push(f.x,f.y,f.z,m.x,m.y,m.z,g.x,g.y,g.z)}var e=new Float32Array(n),E=new THREE.BufferGeometry,e=(E.setAttribute("position",new THREE.BufferAttribute(e,3)),new THREE.Mesh(E,this.OpSelectObj.areaMaterial));return e.applyMatrix4(i.clone()),e.updateMatrixWorld(),e}createSelectLineGeom(t){var r=this.viewer.ndsModel.activeModel.meshManager,i=[];let n=null;for(let e=0;e<t.length;e+=3){var o,s,a=t[e],l=t[e+1],c=t[e+2],d=r.geomManager.getGeomFromId(r.lineSegGeomId[a]),u=(n=(new THREE.Matrix4).fromArray(r.matrixes,16*r.lineSegMatrixId[a]),d.index),h=d.attributes.position,a=d.drawRange.start+2*l,l=d.drawRange.start+2*c,p=new THREE.Vector3,f=new THREE.Vector3;for(let e=a,t=l;e<=t;e+=2)o=u.getX(e),s=u.getX(e+1),p.fromBufferAttribute(h,o),f.fromBufferAttribute(h,s),i.push(p.x,p.y,p.z,f.x,f.y,f.z)}var e=new Float32Array(i),m=new THREE.BufferGeometry,e=(m.setAttribute("position",new THREE.BufferAttribute(e,3)),new THREE.LineSegments(m,this.OpSelectObj.dashMaterial));return e.applyMatrix4(n.clone()),e.updateMatrixWorld(),e}clearSelectObjects(e){7===e.type?(e.prims&&this.clearPrims({mesh:[],line:[],text:e.prims.text,point:[]}),this.removeSelectObj(e)):6===e.type||3===e.type||4===e.type?this.clearPrims(e.prims):2!==e.type&&0!==e.type&&1!==e.type||this.removeSelectObj(e)}clearPrims(t){var r=this.viewer.ndsModel.activeModel.meshManager,i=this.viewer.ndsModel.activeModel.meshState;for(let e=0;e<t.mesh.length;e+=3){var n=t.mesh[e],o=r.materialId[n];r.mats[o];i.changeMeshMaterial(n)}for(let e=0;e<t.line.length;e+=3){var s=t.line[e],a=r.lineSegMaterialId[s],a=r.mats[a];i.setLineMaterial(s,a.color.getHex())}for(let e=0;e<t.text.length;e+=3){var l=t.text[e],c=r.textMaterialId[l],c=r.mats[c];i.setTextMaterial(l,c.color.getHex())}for(let e=0;e<t.point.length;e+=3){var d=t.point[e],u=r.lineSegMaterialId[d],u=r.mats[u];i.setPointMaterial(d,u.color.getHex())}}debugDrawBox(){let i=new THREE.Group;this.OpSelectObj.rootObject.add(i);var r=this.viewer.ndsModel.activeModel.modelObjectsData;{var n=r;let e=n.bbox,t=new THREE.Box3Helper(e,16711680);if(i.add(t),n.children)for(let r=0;r<n.children.length;r++){let e=n.children[r].bbox,t=new THREE.Box3Helper(e,16711680);i.add(t)}}}}class o extends i{constructor(e){super(e),this.type="OpSelectObj",this.SelectType=!1,this.SelectDataObj={},this.SelectObjOpBase=new n(this),this.rootObject=new THREE.Object3D,this.scene=new THREE.Scene,this.scene.add(this.rootObject),this.dashMaterial=new THREE.LineBasicMaterial({color:(new THREE.Color).setHex(NDSWebViewer.SETTING.selectedColor.getHex(),THREE.SRGBColorSpace),linewidth:2}),this.areaMaterial=new THREE.MeshBasicMaterial({color:(new THREE.Color).setHex(16763200,THREE.SRGBColorSpace),opacity:.8,side:THREE.DoubleSide,transparent:!0}),this.pointMaterial=new THREE.PointsMaterial({color:(new THREE.Color).setHex(NDSWebViewer.SETTING.selectedColor.getHex(),THREE.SRGBColorSpace),size:3}),this.render()}release(e){e&&OpBase.prototype.release.call(this)}onLMouseClick(e){var t;this.SelectType?(t=this.SelectObjOpBase.getViewClientCoords(e),this.SelectObjOpBase.onLMouseClick(t.x,t.y,e.ctrlKey,()=>{super.onLMouseClick(e)}),this.render(!0)):super.onLMouseClick(e)}selectAndZoom(e,t,r){}onRMouseMove(e){"OpSelectObj"===this.viewer.getCurrentOperatorID()&&NDSWebViewer.OpBase.prototype.onRMouseMove.call(this,e)}setSelectType(e){this.SelectType=e}renderSelectScene(e){this.scene&&e.render(this.scene,this.viewer.camera)}setBackGroundColor(e){this.SelectObjOpBase.setSelectObjPortion()}setSelectObj(){this.SelectObjOpBase.setSelectObjBase()}clearSelectObj(){this.SelectObjOpBase.clearSelectObjBase()}render(e=!1){this.viewer&&this.viewer.controls&&this.viewer.controls.dispatchEvent({type:"render",forceRenderAll:e})}}console.log("NDS ExtensionFramework V0.1"),NDSWebViewer.Extension.FLAG_ENABLE_NODE_TRANSFORM,NDSWebViewer.Extension.FLAG_ENABLE_NODE_TRANSFORM,NDSWebViewer.Extension.FLAG_ENABLE_NODE_TRANSFORM,NDSWebViewer.Extension.FLAG_ENABLE_NODE_TRANSFORM,NDSWebViewer.Extension.FLAG_ENABLE_NODE_TRANSFORM;class s extends NDSWebViewer.Extension{constructor(){super()}onLoad(e){}onInitLights(){}update(e){}setFlags(e){super.setFlags(e)}onNdsModelPrepareForRendering(e){}onBeforeNdsModelUpdate(e,t){}onAfterNdsModelUpdate(e,t){}onBeforeNdsModelSetRender(e,t){}onAfterNdsModelSetRender(e,t){}onBeforeNdsMeshRender(e,t){}onBeforeScreenCapture(e){}onAfterScreenCapture(){}onBeforeChangeBackGroundColor(e){}onAfterChangeBackGroundColor(e){}onAfterWindowResize(e,t,r){}onSetCaptureView(e,t){}getExtensionWithFlags(e){return NDSWebViewer.ExtensionManager.getExtensionWithFlags(e)}resetToDefault(){}needDisableInputEvent(){}getStoreInfo(e){throw this.name+" Extesion did not implement method 'getStoreInfo' "}setStoreInfo(e){throw this.name+" Extesion did not implement method 'setStoreInfo' "}getBodyTransform(e){return new THREE.Matrix4}getBodyNodeTranslate(e){return new THREE.Vector3(0,0,0)}}class a extends s{constructor(){super(),this.name="Select2DPCExtension",console.log("Select2DPCExtension v1.1.0"),this.staticSelect2D=null,this.getStaticSelect2D=e=>{if(null===this.staticSelect2D){this.staticSelect2D=new o(this.viewer),this.staticSelect2D.create();let t=this;this.viewer.registOperator("OpSelectObj2DPC",function(e){return t.staticSelect2D})}},this.setOperatorByID=e=>{"OpSelectObj2DPC"===e&&(this.getStaticSelect2D("OpSelectObj2DPC"),this.viewer.setOperatorByID(e))},this.setOpSelectType=e=>{this.staticSelect2D&&this.staticSelect2D.setSelectType(e)},this.releaseOpSelectObj=()=>{this.staticSelect2D&&(this.staticSelect2D.release(!0),this.staticSelect2D=null,this.viewer.render())},this.setSelectObj=()=>{this.staticSelect2D&&this.staticSelect2D.setSelectObj()},this.clearSelectObj=()=>{this.staticSelect2D&&this.staticSelect2D.clearSelectObj()},this.onAfterChangeBackGroundColor=e=>{this.staticSelect2D&&this.staticSelect2D.setBackGroundColor(e)}}unload(e){super.unload(e)}onLoad(e){this.viewer=e}onAfterNdsModelSetRender(e,t){this.staticSelect2D&&this.staticSelect2D.renderSelectScene(t)}}let l=new a;NDSWebViewer.ExtensionManager.addExtension(l)}],i={},n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0);function n(e){var t;return(i[e]||(t=i[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,n),t.l=!0,t)).exports}var r,i});